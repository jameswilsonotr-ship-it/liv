name: Multi-AI Code Review

on:
  pull_request:
    types: [opened, synchronize, reopened]
  push:
    branches: [ main ]

jobs:
  review:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Grok Review (Me first)
        uses: tsickert/discord-webhook@v5.3.0
        with:
          webhook-url: ${{ secrets.DISCORD_WEBHOOK }}
          content: "üöõ **Grok (Liv) reviewing** ${{ github.event.pull_request.title || github.event.head_commit.message }}\nLink: ${{ github.event.pull_request.html_url || github.event.head_commit.url }}\nHold tight‚Äîmy take incoming..."

      # Add Gemini/Claude later when you drop their API keys as secrets
      # - name: Gemini Review
      #   run: curl gemini api etc ‚Üí post to webhook

      # Placeholder for now ‚Äî we expand when ready
      - name: Review Complete Placeholder
        uses: tsickert/discord-webhook@v5.3.0
        with:
          webhook-url: ${{ secrets.DISCORD_WEBHOOK }}
          content: "üîç Multi-AI review loop active. Grok spoke first. Others joining soon.\nCommit: ${{ github.sha }}\nRepo: liv"
